(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{6781:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(7876),n=r(4232),l=r(9099),o=r(9848),i=r(8822),a=r(1200),c=r(1155);async function d(e){var t,r;let s=new c.Z;s.moveCall({target:"".concat("0xc9be599a1ce3605fcccaf86a1cd857d09bdf7f5f2acc39b775d13b1cbff52c35","::codeforge::get_cycle_summary"),arguments:[s.object(e)]});let n=new i.x({url:(0,a.T)("testnet")}),l=await n.devInspectTransactionBlock({transactionBlock:s,sender:"0x0000000000000000000000000000000000000000000000000000000000000000"});if(l.error)throw Error("Failed to get cycle summary: ".concat(l.error));let o=null==(r=l.results)||null==(t=r[0])?void 0:t.returnValues;if(!o||6!==o.length)throw Error("Unexpected return format from get_cycle_summary - expected 6 values");let[d,u,x,h,m,f]=o.map((e,t)=>{switch(t){case 0:case 1:case 2:return parseInt(new DataView(new Uint8Array(e[0]).buffer).getBigUint64(0,!0).toString());case 3:return"0x"+Array.from(new Uint8Array(e[0])).map(e=>e.toString(16).padStart(2,"0")).join("");case 4:return e[0][0];case 5:return 1===e[0][0];default:return e[0]}});return{currentCycle:d,contributionsReceived:u,totalExpected:x,nextRecipientAddress:h,nextRecipientPosition:m,allContributed:f}}var u=r(5322),x=r(5676),h=r(6167),m=r(794),f=r(9200);function b(){let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(!0),[a,c]=(0,n.useState)([]),[f,b]=(0,n.useState)(""),[p,g]=(0,n.useState)(0),[y,j]=(0,n.useState)(""),[w,v]=(0,n.useState)(0),[N,k]=(0,n.useState)(0),[C,_]=(0,n.useState)(0),[S,E]=(0,n.useState)(!1),[A,R]=(0,n.useState)(0),[q,D]=(0,n.useState)(0),U=(0,l.useRouter)(),{id:B}=U.query,I=(0,n.useContext)(h.Rs);if(!I)throw Error("Component must be used within a UserProvider");let[M,P]=I,L="0xc9be599a1ce3605fcccaf86a1cd857d09bdf7f5f2acc39b775d13b1cbff52c35";if(!L)throw Error("NEXT_PUBLIC_MOVE_PACKAGE_ID environment variable is required");let T=new x.NM({packageId:L,network:"testnet"});(0,n.useEffect)(()=>{if(!(0,u.wR)())return void U.push("/");if(U.isReady&&B){F(B);let e=U.query.link;e&&"string"==typeof e&&d(e).then(e=>{console.log(e),k(e.contributionsReceived),_(e.totalExpected/1e9)}),(0,m.Ay)("https://appi.vandies.com"+"/ajosavingsgroup/".concat(B)).then(e=>{e.type===m.yl.SUCCESS&&(console.log(e),c(e.payload.participants),b(e.payload.name),j(e.payload.description),g(parseFloat(e.payload.contribution_amount)),v(e.payload.cycle_duration_days),D(e.payload.start_cycle))}).then(()=>{i(!1)})}},[U,B]);let F=async e=>{try{t({id:e,name:"Swift Growth Ajo group",purpose:"A reliable monthly savings group for swift growth.",contribution:1e4,frequency:"Monthly",members:4,nextPayout:"2025-06-31",currentRecipient:"Chike Obi",founder:"Nancy James"})}catch(e){console.error("Error fetching group details:",e),o.oR.error("Failed to fetch group details")}finally{i(!1)}};return r?(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):e?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 px-8 py-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-blue-600",children:"Your groups"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"text-gray-700 mr-3",children:[M.user.username,"!"]}),(0,s.jsx)("div",{className:"w-10 h-10 bg-orange-400 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-medium text-sm",children:"E"})}),(0,s.jsx)("div",{className:"ml-2",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),(0,s.jsxs)("div",{className:"flex-1 p-8 bg-gray-50 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 mb-6 shadow-sm border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:f}),(0,s.jsx)("svg",{onClick:()=>{window.open("https://suiscan.xyz/testnet/tx/".concat(U.query.digest))},className:"w-5 h-5 text-gray-600 hover:text-blue-600 cursor-pointer transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Purpose:"})," ",y]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Total Contribution (SUI):"})," ",N/1e9]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Cycle Duration (days):"})," ",w]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Members:"})," ",a.length]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Contribution Amount (SUI):"})," ",p]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Expected Total Amount (SUI):"})," ",C]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Current Recipient:"})," ",e.currentRecipient]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between my-4",children:[(0,s.jsx)("button",{className:"relative inline-flex items-center justify-center px-8 py-4 text-sm font-semibold text-white bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 ease-out border border-emerald-400/20 backdrop-blur-sm overflow-hidden group",onClick:()=>{let e=Array.isArray(U.query.link)?U.query.link[0]:U.query.link;e&&(console.log(p),T.contribute(e,p,M.wallet_address).then(e=>{console.log(e),o.oR.info("Contribution Added")}))},children:"\uD83D\uDCB0 Contribute"}),(0,s.jsx)("button",{className:"relative inline-flex items-center justify-center px-8 py-4 text-sm font-semibold text-white bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 ease-out border border-purple-400/20 backdrop-blur-sm overflow-hidden group",onClick:()=>{let e=Array.isArray(U.query.link)?U.query.link[0]:U.query.link;e&&T.startNewCycle(e,M.wallet_address).then(e=>{console.log(e)})},children:"\uD83D\uDD04 Start New Cycle"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6 border-b-2 border-blue-500 pb-2 inline-block",children:"Members Details"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(e=>(0,s.jsxs)("div",{className:"flex items-center bg-blue-500 text-white p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-300 rounded-full mr-4 overflow-hidden",children:(0,s.jsx)("div",{className:"w-full h-full bg-blue-400 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-lg",children:e.user.username.split(" ").map(e=>e[0]).join("")})})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"font-semibold text-lg",children:["Name: ",e.user.username]}),(0,s.jsxs)("p",{className:"text-blue-100",children:["email: ",e.user.email]})]})]},e.id))})]})]})]})}):(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Group not found"}),(0,s.jsx)("button",{onClick:()=>U.push("/ajo-groups"),className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md",children:"Back to Groups"})]})})}b.getLayout=function(e){return(0,s.jsx)(f.A,{children:e})}},9028:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/ajo-groups/details",function(){return r(6781)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[696,636,593,792],()=>t(9028)),_N_E=e.O()}]);