(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{794:(e,r,t)=>{"use strict";t.d(r,{Ay:()=>n,yl:()=>s});var s=function(e){return e.REDIRECT="redirect",e.SUCCESS="success",e.KNOWN_ERROR="known_error",e.EXPIRED="expired",e}(s||{}),a=function(e){return e.REFRESH="/auth/refreshToken/",e.SIGNIN="/",e.CONFIRM="/auth/confirm/",e}(a||{});async function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=localStorage.getItem("token"),a={...r,headers:{...r.headers,...t&&s&&{Authorization:"Bearer ".concat(s)}}};if(t&&!s)return{type:"redirect",link:"/"};try{let r=await fetch(e,a);return await o(r,e,a)}catch(r){let e=r instanceof Error?r.message:"Unknown error";throw Error("Network error: ".concat(e))}}async function o(e,r,t){let{status:s}=e;switch(s){case 200:case 201:return{type:"success",payload:await e.json()};case 204:return{type:"success",payload:{message:"Deleted"}};case 401:return await i(e,r,t);case 403:return{type:"redirect",link:"/auth/confirm/"};case 406:return{type:"known_error",message:(await e.json()).message};default:throw Error("Server Error: ".concat(s))}}async function i(e,r,t){return"user_not_found"===(await e.json()).code?{type:"redirect",link:"/"}:await l()?await n(r,t,!0):(console.log("user session has expired!"),window.localStorage.clear(),{type:"expired",link:"/"})}async function l(){let e=localStorage.getItem("refresh");if(!e)return!1;try{let r=await fetch("".concat("https://suifunds.yuviewenergy.com","/auth/refreshToken/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(r.ok){let e=await r.json();return localStorage.setItem("token",e.access),localStorage.setItem("refresh",e.refresh),!0}return!1}catch(e){return console.error("Token refresh failed:",e),!1}}},2957:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/ajo-groups",function(){return t(5483)}])},5483:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var s=t(7876),a=t(4232),n=t(9099),o=t(9848),i=t(5322),l=t(794),c=t(9200),d=t(6167);function u(){let[e,r]=(0,a.useState)([]),[t,c]=(0,a.useState)(""),[u,h]=(0,a.useState)(!0),m=(0,n.useRouter)(),x=(0,a.useContext)(d.Rs);if(!x)throw Error("Component must be used within a UserProvider");let[f,g]=x;(0,a.useEffect)(()=>{if(!(0,i.wR)())return void m.push("/");p()},[m]);let p=async()=>{try{localStorage.getItem("accessToken")||localStorage.getItem("authToken"),(0,l.Ay)("https://suifunds.yuviewenergy.com/ajosavingsgroup/").then(e=>{e.type===l.yl.SUCCESS&&(console.log(e),r(e.payload.results))}).then(()=>{h(!1)})}catch(e){console.error("Error fetching ajo groups:",e),o.oR.error("Failed to fetch your groups")}finally{h(!1)}},y=e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()));return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 px-8 py-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-blue-600",children:"Your groups"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("span",{className:"text-gray-700 mr-3",children:[f.user.username,"!"]}),(0,s.jsx)("div",{className:"w-10 h-10 bg-orange-400 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-medium text-sm",children:"N"})}),(0,s.jsx)("div",{className:"ml-2",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),(0,s.jsxs)("div",{className:"flex-1 p-8 bg-gray-50",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("input",{type:"text",placeholder:"Search...",value:t,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg bg-white"})]})}),u?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):y.length>0?(0,s.jsx)("div",{className:"space-y-4",children:y.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4 justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("img",{src:"/suiflow.png",className:"w-12 h-12 mr-4",alt:"Group Logo"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:e.description})]})]}),(0,s.jsx)("button",{onClick:()=>m.push("/ajo-groups/details?digest=".concat(e.digest,"&id=").concat(e.id,"&link=").concat(e.address_link)),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md font-medium transition-colors",children:"View Details"})]})},e.id))}):(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No groups found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:t?"No groups match your search.":"You haven't joined any Ajo groups yet."}),(0,s.jsx)("button",{onClick:()=>m.push("/create-pool"),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-md font-medium",children:"Create Your First Group"})]})]})]})})}u.getLayout=function(e){return(0,s.jsx)(c.A,{children:e})}}},e=>{var r=r=>e(e.s=r);e.O(0,[141,373,636,593,792],()=>r(2957)),_N_E=e.O()}]);