(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[696],{794:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>n,yl:()=>s});var s=function(e){return e.REDIRECT="redirect",e.SUCCESS="success",e.KNOWN_ERROR="known_error",e.EXPIRED="expired",e}(s||{}),o=function(e){return e.REFRESH="/auth/refreshToken/",e.SIGNIN="/",e.CONFIRM="/auth/confirm/",e}(o||{});async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=localStorage.getItem("token"),o={...t,headers:{...t.headers,...r&&s&&{Authorization:"Bearer ".concat(s)}}};if(r&&!s)return{type:"redirect",link:"/"};try{let t=await fetch(e,o);return await a(t,e,o)}catch(t){let e=t instanceof Error?t.message:"Unknown error";throw Error("Network error: ".concat(e))}}async function a(e,t,r){let{status:s}=e;switch(s){case 200:case 201:return{type:"success",payload:await e.json()};case 204:return{type:"success",payload:{message:"Deleted"}};case 401:return await i(e,t,r);case 403:return{type:"redirect",link:"/auth/confirm/"};case 406:return{type:"known_error",message:(await e.json()).message};default:throw Error("Server Error: ".concat(s))}}async function i(e,t,r){return"user_not_found"===(await e.json()).code?{type:"redirect",link:"/"}:await c()?await n(t,r,!0):(console.log("user session has expired!"),window.localStorage.clear(),{type:"expired",link:"/"})}async function c(){let e=localStorage.getItem("refresh");if(!e)return!1;try{let t=await fetch("".concat("https://suifunds.yuviewenergy.com","/auth/refreshToken/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(t.ok){let e=await t.json();return localStorage.setItem("token",e.access),localStorage.setItem("refresh",e.refresh),!0}return!1}catch(e){return console.error("Token refresh failed:",e),!1}}},5322:(e,t,r)=>{"use strict";r.d(t,{Ex:()=>s,gf:()=>n,wR:()=>a});let s=e=>{e.token&&localStorage.setItem("token",e.token),e.access&&localStorage.setItem("token",e.access),e.refresh&&localStorage.setItem("refresh",e.refresh)},o=()=>localStorage.getItem("token")||localStorage.getItem("token"),n=()=>{localStorage.removeItem("token"),localStorage.removeItem("token"),localStorage.removeItem("refresh")},a=()=>!!o()},5676:(e,t,r)=>{"use strict";r.d(t,{NM:()=>i,iH:()=>u,yZ:()=>l}),r(4232);var s=r(8822),o=r(1200),n=r(1155),a=r(7104);class i{async createSavingsGroup(e,t){try{var r;if(0===e.participants.length)throw Error("At least one participant is required");let s=e.participants.map(e=>e.position),o=new Set(s);if(s.length!==o.size)throw Error("Duplicate positions detected");let i=e.participants.length;for(let t of e.participants)if(t.position<1||t.position>i)throw Error("Position must be between 1 and ".concat(i));if(0===e.multisigConfig.signers.length)throw Error("At least one multisig signer is required");if(e.multisigConfig.threshold<=0||e.multisigConfig.threshold>e.multisigConfig.signers.length)throw Error("Invalid multisig threshold");let c=new n.Z,l=e.participants.map(e=>a.h.fromSecretKey(e.wallet).getPublicKey().toSuiAddress()),u=e.participants.map(e=>e.position);console.log("Participant wallets:",l),console.log("Participant positions:",u),console.log("Multisig signers:",e.multisigConfig.signers),console.log("Multisig threshold:",e.multisigConfig.threshold),c.moveCall({target:"".concat(this.packageId,"::codeforge::create_savings_group"),arguments:[c.pure.string(e.name),c.pure.u64(e.cycleDurationDays),c.pure.u64(e.startCycle),c.pure.u64(e.contributionAmount),c.pure.vector("address",l),c.pure.vector("u8",u),c.pure.vector("address",e.multisigConfig.signers),c.pure.u64(e.multisigConfig.threshold),c.object("0x0000000000000000000000000000000000000000000000000000000000000006")]}),c.setGasBudget(1e7);let d=await this.client.signAndExecuteTransaction({signer:t,transaction:c,options:{showEvents:!0,showEffects:!0,showObjectChanges:!0},requestType:"WaitForLocalExecution"});if(console.log("Transaction result:",d),d.objectChanges){let e=d.objectChanges.find(e=>{var t;return"created"===e.type&&(null==(t=e.objectType)?void 0:t.includes("SavingsGroup"))});if(e&&"objectId"in e)return{groupId:e.objectId,digest:d.digest}}let g=null==(r=d.events)?void 0:r.find(e=>e.type.includes("GroupCreated"));if(g&&g.parsedJson)return{groupId:g.parsedJson.group_id,digest:d.digest};throw Error("Failed to get group ID from transaction result")}catch(e){if(console.error("Error creating savings group:",e),e instanceof Error&&(e.message.includes("No valid gas coins found")||e.message.includes("insufficient gas")||e.message.includes("Insufficient SUI balance")))throw Error("Insufficient SUI balance for gas fees. Please add SUI to your wallet.");throw e}}async contribute(e,t,r){try{let s=a.h.fromSecretKey(r),o=new n.Z,[i]=o.splitCoins(o.gas,[o.pure.u64(1e9*t)]);o.moveCall({target:"".concat(this.packageId,"::codeforge::contribute"),arguments:[o.object(e),i,o.object("0x0000000000000000000000000000000000000000000000000000000000000006")]});let c=await this.client.signAndExecuteTransaction({signer:s,transaction:o,options:{showEvents:!0,showEffects:!0}});return console.log("Contribution transaction result:",c),c.digest}catch(e){if(console.error("Error making contribution:",e),e instanceof Error&&(e.message.includes("No valid gas coins found")||e.message.includes("insufficient gas")||e.message.includes("Insufficient SUI balance")))throw Error("Insufficient SUI balance for gas fees. Please add SUI to your wallet.");throw e}}async startNewCycle(e,t){try{let r=a.h.fromSecretKey(t),s=new n.Z;s.moveCall({target:"".concat(this.packageId,"::codeforge::start_new_cycle"),arguments:[s.object(e),s.object("0x0000000000000000000000000000000000000000000000000000000000000006")]});let o=await this.client.signAndExecuteTransaction({signer:r,transaction:s,options:{showEvents:!0,showEffects:!0}});return console.log("Start new cycle transaction result:",o),o.digest}catch(e){if(console.error("Error starting new cycle:",e),e instanceof Error&&(e.message.includes("No valid gas coins found")||e.message.includes("insufficient gas")||e.message.includes("Insufficient SUI balance")))throw Error("Insufficient SUI balance for gas fees. Please add SUI to your wallet.");throw e}}async proposePayout(e,t){try{let r=new n.Z;r.moveCall({target:"".concat(this.packageId,"::codeforge::propose_payout"),arguments:[r.object(e),r.object("0x0000000000000000000000000000000000000000000000000000000000000006")]});let s=await this.client.signAndExecuteTransaction({signer:t,transaction:r,options:{showEvents:!0,showEffects:!0}});return console.log("Propose payout transaction result:",s),s.digest}catch(e){if(console.error("Error proposing payout:",e),e instanceof Error&&(e.message.includes("No valid gas coins found")||e.message.includes("insufficient gas")||e.message.includes("Insufficient SUI balance")))throw Error("Insufficient SUI balance for gas fees. Please add SUI to your wallet.");throw e}}async signPayout(e,t){try{let r=new n.Z;r.moveCall({target:"".concat(this.packageId,"::codeforge::sign_payout"),arguments:[r.object(e)]});let s=await this.client.signAndExecuteTransaction({signer:t,transaction:r,options:{showEvents:!0,showEffects:!0}});return console.log("Sign payout transaction result:",s),s.digest}catch(e){if(console.error("Error signing payout:",e),e instanceof Error&&(e.message.includes("No valid gas coins found")||e.message.includes("insufficient gas")||e.message.includes("Insufficient SUI balance")))throw Error("Insufficient SUI balance for gas fees. Please add SUI to your wallet.");throw e}}async executePayout(e,t){try{let r=new n.Z;r.moveCall({target:"".concat(this.packageId,"::codeforge::execute_payout"),arguments:[r.object(e)]});let s=await this.client.signAndExecuteTransaction({signer:t,transaction:r,options:{showEvents:!0,showEffects:!0}});return console.log("Execute payout transaction result:",s),s.digest}catch(e){if(console.error("Error executing payout:",e),e instanceof Error&&(e.message.includes("No valid gas coins found")||e.message.includes("insufficient gas")||e.message.includes("Insufficient SUI balance")))throw Error("Insufficient SUI balance for gas fees. Please add SUI to your wallet.");throw e}}constructor(e){this.client=new s.x({url:(0,o.T)(e.network)}),this.packageId=e.packageId}}let c={packageId:"0xc9be599a1ce3605fcccaf86a1cd857d09bdf7f5f2acc39b775d13b1cbff52c35",network:"testnet"};async function l(e,t,r,s,o,n,l,u,d){var g,f;let h=(g=u,f=l,new i({packageId:g||c.packageId,network:f||c.network})),p=function(e,t){console.log(e);let r=e.map(e=>a.h.fromSecretKey(e.wallet).getPublicKey().toSuiAddress()),s=Math.ceil(e.length/2);return{signers:r,threshold:t||s}}(o,d),m=a.h.fromSecretKey(n);return await h.createSavingsGroup({name:e,cycleDurationDays:t,startCycle:r,contributionAmount:1e9*s,participants:o,multisigConfig:p},m)}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"testnet";try{if(!e||"string"!=typeof e)throw Error("Invalid address provided");let r=["testnet","mainnet","devnet"];if(!r.includes(t))throw Error("Invalid network. Must be one of: ".concat(r.join(", ")));let n=(0,o.T)(t),i=new s.x({url:n}),c=await i.getBalance({owner:a.h.fromSecretKey(e).getPublicKey().toSuiAddress(),coinType:"0x2::sui::SUI"}),l=parseInt(c.totalBalance)/1e9;return{balance:c.totalBalance,balanceInSui:l,coinObjectCount:c.coinObjectCount}}catch(e){throw console.error("Error fetching SUI balance:",e),Error("Failed to fetch balance: ".concat((null==e?void 0:e.message)||"Unknown error"))}}},9099:(e,t,r)=>{e.exports=r(8253)},9200:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(7876),o=r(5322),n=r(9848),a=r(9099);function i(e){let{children:t}=e,r=(0,a.useRouter)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,s.jsxs)("div",{className:"w-72 bg-white border-r border-gray-200",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("img",{src:"/suiflow.png",className:"w-8 h-8 mr-3",alt:"Sui-Fund Logo"}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Sui-Fund"})]})}),(0,s.jsxs)("nav",{className:"p-4 h-[90%] flex flex-col justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{onClick:()=>r.push("/home"),className:"flex cursor-pointer items-center p-3 bg-blue-50 text-blue-600 rounded-lg",children:[(0,s.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,s.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),(0,s.jsx)("span",{className:"font-medium",children:"Dashboard"})]}),(0,s.jsxs)("div",{onClick:()=>r.push("/ajo-groups/"),className:"flex items-center p-3 text-gray-600 block w-full hover:bg-gray-50 rounded-lg cursor-pointer",children:[(0,s.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,s.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})}),(0,s.jsx)("span",{children:"Your groups"})]}),(0,s.jsxs)("div",{onClick:()=>r.push("/notifications"),className:"flex items-center p-3 text-gray-600 hover:bg-gray-50 rounded-lg cursor-pointer",children:[(0,s.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,s.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,s.jsx)("span",{children:"Notifications"})]})]}),(0,s.jsxs)("div",{className:"mt-8 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("button",{onClick:()=>{r.push("/create-pool")},className:"flex items-center w-full p-3 text-blue-600 hover:bg-blue-50 rounded-lg",children:[(0,s.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,s.jsx)("span",{className:"font-medium",children:"Create Pool"})]}),(0,s.jsxs)("div",{onClick:()=>{(0,o.gf)(),localStorage.removeItem("userData"),n.oR.success("Logged out successfully"),r.push("/")},className:"flex items-center p-3 text-gray-600 hover:bg-gray-50 rounded-lg cursor-pointer mt-1",children:[(0,s.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,s.jsx)("span",{children:"Log out"})]})]})]})]}),t]})})}}}]);