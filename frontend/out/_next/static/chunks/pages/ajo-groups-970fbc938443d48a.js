(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{794:(e,r,s)=>{"use strict";s.d(r,{Ay:()=>o,yl:()=>t});var t=function(e){return e.REDIRECT="redirect",e.SUCCESS="success",e.KNOWN_ERROR="known_error",e.EXPIRED="expired",e}(t||{}),a=function(e){return e.REFRESH="/auth/refreshToken/",e.SIGNIN="/",e.CONFIRM="/auth/confirm/",e}(a||{});async function o(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=localStorage.getItem("token"),a={...r,headers:{...r.headers,...s&&t&&{Authorization:"Bearer ".concat(t)}}};if(s&&!t)return{type:"redirect",link:"/"};try{let r=await fetch(e,a);return await n(r,e,a)}catch(r){let e=r instanceof Error?r.message:"Unknown error";throw Error("Network error: ".concat(e))}}async function n(e,r,s){let{status:t}=e;switch(t){case 200:case 201:return{type:"success",payload:await e.json()};case 204:return{type:"success",payload:{message:"Deleted"}};case 401:return await l(e,r,s);case 403:return{type:"redirect",link:"/auth/confirm/"};case 406:return{type:"known_error",message:(await e.json()).message};default:throw Error("Server Error: ".concat(t))}}async function l(e,r,s){return"user_not_found"===(await e.json()).code?{type:"redirect",link:"/"}:await i()?await o(r,s,!0):(console.log("user session has expired!"),window.localStorage.clear(),{type:"expired",link:"/"})}async function i(){let e=localStorage.getItem("refresh");if(!e)return!1;try{let r=await fetch("".concat("https://suifunds.yuviewenergy.com","/auth/refreshToken/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:e})});if(r.ok){let e=await r.json();return localStorage.setItem("token",e.access),localStorage.setItem("refresh",e.refresh),!0}return!1}catch(e){return console.error("Token refresh failed:",e),!1}}},2957:(e,r,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/ajo-groups",function(){return s(5483)}])},5322:(e,r,s)=>{"use strict";s.d(r,{Ex:()=>t,gf:()=>o,wR:()=>n});let t=e=>{e.token&&localStorage.setItem("token",e.token),e.access&&localStorage.setItem("token",e.access),e.refresh&&localStorage.setItem("refresh",e.refresh)},a=()=>localStorage.getItem("token")||localStorage.getItem("token"),o=()=>{localStorage.removeItem("token"),localStorage.removeItem("token"),localStorage.removeItem("refresh")},n=()=>!!a()},5483:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>u});var t=s(7876),a=s(4232),o=s(9099),n=s(9848),l=s(5322),i=s(794),c=s(9200),d=s(6167);function u(){let[e,r]=(0,a.useState)([]),[s,c]=(0,a.useState)(""),[u,h]=(0,a.useState)(!0),m=(0,o.useRouter)(),x=(0,a.useContext)(d.Rs);if(!x)throw Error("Component must be used within a UserProvider");let[g,p]=x;(0,a.useEffect)(()=>{if(!(0,l.wR)())return void m.push("/");f()},[m]);let f=async()=>{try{localStorage.getItem("accessToken")||localStorage.getItem("authToken"),(0,i.Ay)("https://suifunds.yuviewenergy.com/ajosavingsgroup/").then(e=>{e.type===i.yl.SUCCESS&&(console.log(e),r(e.payload.results))}).then(()=>{h(!1)})}catch(e){console.error("Error fetching ajo groups:",e),n.oR.error("Failed to fetch your groups")}finally{h(!1)}},j=e.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase()));return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"bg-white border-b border-gray-200 px-8 py-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-blue-600",children:"Your groups"}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("span",{className:"text-gray-700 mr-3",children:[g.user.username,"!"]}),(0,t.jsx)("div",{className:"w-10 h-10 bg-orange-400 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white font-medium text-sm",children:"N"})}),(0,t.jsx)("div",{className:"ml-2",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),(0,t.jsxs)("div",{className:"flex-1 p-8 bg-gray-50",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,t.jsx)("input",{type:"text",placeholder:"Search...",value:s,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg bg-white"})]})}),u?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):j.length>0?(0,t.jsx)("div",{className:"space-y-4",children:j.map(e=>(0,t.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("img",{src:"/suiflow.png",className:"w-12 h-12 mr-4",alt:"Group Logo"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:e.description})]})]}),(0,t.jsx)("button",{onClick:()=>m.push("/ajo-groups/details?digest=".concat(e.digest,"&id=").concat(e.id,"&link=").concat(e.address_link)),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md font-medium transition-colors",children:"View Details"})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No groups found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:s?"No groups match your search.":"You haven't joined any Ajo groups yet."}),(0,t.jsx)("button",{onClick:()=>m.push("/create-pool"),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-md font-medium",children:"Create Your First Group"})]})]})]})})}u.getLayout=function(e){return(0,t.jsx)(c.A,{children:e})}},9099:(e,r,s)=>{e.exports=s(8253)},9200:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});var t=s(7876),a=s(5322),o=s(9848),n=s(9099);function l(e){let{children:r}=e,s=(0,n.useRouter)();return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"w-72 bg-white border-r border-gray-200",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("img",{src:"/suiflow.png",className:"w-8 h-8 mr-3",alt:"Sui-Fund Logo"}),(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Sui-Fund"})]})}),(0,t.jsxs)("nav",{className:"p-4 h-[90%] flex flex-col justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{onClick:()=>s.push("/home"),className:"flex cursor-pointer items-center p-3 bg-blue-50 text-blue-600 rounded-lg",children:[(0,t.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,t.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),(0,t.jsx)("span",{className:"font-medium",children:"Dashboard"})]}),(0,t.jsxs)("div",{onClick:()=>s.push("/ajo-groups/"),className:"flex items-center p-3 text-gray-600 block w-full hover:bg-gray-50 rounded-lg cursor-pointer",children:[(0,t.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,t.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})})}),(0,t.jsx)("span",{children:"Your groups"})]}),(0,t.jsxs)("div",{onClick:()=>s.push("/notifications"),className:"flex items-center p-3 text-gray-600 hover:bg-gray-50 rounded-lg cursor-pointer",children:[(0,t.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,t.jsx)("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,t.jsx)("span",{children:"Notifications"})]})]}),(0,t.jsxs)("div",{className:"mt-8 pt-4 border-t border-gray-200",children:[(0,t.jsxs)("button",{onClick:()=>{s.push("/create-pool")},className:"flex items-center w-full p-3 text-blue-600 hover:bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,t.jsx)("span",{className:"font-medium",children:"Create Pool"})]}),(0,t.jsxs)("div",{onClick:()=>{(0,a.gf)(),localStorage.removeItem("userData"),o.oR.success("Logged out successfully"),s.push("/")},className:"flex items-center p-3 text-gray-600 hover:bg-gray-50 rounded-lg cursor-pointer mt-1",children:[(0,t.jsx)("div",{className:"w-5 h-5 mr-3",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),(0,t.jsx)("span",{children:"Log out"})]})]})]})]}),r]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[636,593,792],()=>r(2957)),_N_E=e.O()}]);